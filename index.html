<!DOCTYPE html>
<html>
<head>
  <title>Home Project Tracker</title>
</head>
<body>
  <h2>Home Project Tracker</h2>
  <form id="projectForm">
    <input type="text" id="name" placeholder="Project Name" autocomplete="off" required />
    <input type="number" id="priority" placeholder="Priority (1â€“5)" autocomplete="off" required min="1" max="5" />
    <select id="status" autocomplete="off">
      <option value="Not Started">Not Started</option>
      <option value="In Progress">In Progress</option>
      <option value="Complete">Complete</option>
    </select>
    <button type="submit">Add Project</button>
  </form>

  <ul id="projectList"></ul>

  <script>
    const API_URL = 'https://script.google.com/macros/s/AKfycbzZ6lR1XKvsYj0A6oSK3Z5CQvJkEYYR-eGllQ5sQThOI2QhuzUPt_bOhbFBX_XjyT0R/exec';
    const TOKEN = 'Project1285'; // Use the same token as in your Apps Script

    const form = document.getElementById('projectForm');
    const list = document.getElementById('projectList');

    // Load projects from Google Sheets
    async function loadProjects() {
      try {
        const res = await fetch(`${API_URL}?token=${TOKEN}`);
        const data = await res.json();

        list.innerHTML = '';
        data.forEach((project) => {
          const li = document.createElement('li');
          li.textContent = `${project.Name} (Priority: ${project.Priority}, Status: ${project.Status})`;
          list.appendChild(li);
        });
      } catch (err) {
        console.error('Failed to load projects:', err);
        list.innerHTML = '<li>Error loading projects.</li>';
      }
    }

    // Add project via POST
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const priority = document.getElementById('priority').value;
      const status = document.getElementById('status').value;

      const payload = {
        token: TOKEN,
        Name: name,
        Priority: priority,
        Status: status
      };

      try {
        const query = new URLSearchParams({
          token: TOKEN,
          Name: name,
          Priority: priority,
          Status: status
        }).toString();

        await fetch(`${API_URL}?${query}`);


        form.reset();
        loadProjects(); // Refresh list
      } catch (err) {
        console.error('Failed to add project:', err);
      }
    });

    // Initial load
    loadProjects();
  </script>
</body>
</html>



